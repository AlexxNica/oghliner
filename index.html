<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <title>Oghliner</title>
    <meta name="description" content="Oghliner : template and tool for deploying Offline Web Apps to GitHub Pages">

    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon"/>
    <link rel="apple-touch-icon-precomposed" sizes="57x57" href="images/apple-touch-icon-57x57.png" />
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="images/apple-touch-icon-114x114.png" />
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="images/apple-touch-icon-72x72.png" />
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="images/apple-touch-icon-144x144.png" />
    <link rel="apple-touch-icon-precomposed" sizes="60x60" href="images/apple-touch-icon-60x60.png" />
    <link rel="apple-touch-icon-precomposed" sizes="120x120" href="images/apple-touch-icon-120x120.png" />
    <link rel="apple-touch-icon-precomposed" sizes="76x76" href="images/apple-touch-icon-76x76.png" />
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="images/apple-touch-icon-152x152.png" />
    <link rel="icon" type="image/png" href="images/favicon-196x196.png" sizes="196x196" />
    <link rel="icon" type="image/png" href="images/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/png" href="images/favicon-32x32.png" sizes="32x32" />
    <link rel="icon" type="image/png" href="images/favicon-16x16.png" sizes="16x16" />
    <link rel="icon" type="image/png" href="images/favicon-128x128.png" sizes="128x128" />
    <meta name="application-name" content="&nbsp;"/>
    <meta name="msapplication-TileColor" content="#FFFFFF" />
    <meta name="msapplication-TileImage" content="images/mstile-144x144.png" />
    <meta name="msapplication-square70x70logo" content="images/mstile-70x70.png" />
    <meta name="msapplication-square150x150logo" content="images/mstile-150x150.png" />
    <meta name="msapplication-wide310x150logo" content="images/mstile-310x150.png" />
    <meta name="msapplication-square310x310logo" content="images/mstile-310x310.png" />
    
    <link rel="stylesheet" type="text/css" media="all" href="styles/stylesheet.css">
    <link rel="stylesheet" type="text/css" media="all" href="styles/tabzilla/css/tabzilla.css">
    <script src="scripts/offline-manager.js"></script>
  </head>

  <body>

    <div class="wrapper">

    <div class="center">
      <div id="tabzilla">
        <a href="https://www.mozilla.org/">Mozilla</a>
      </div>
    </div>

    <!-- MAIN CONTENT -->
    <main class="center">
      <h1>Oghliner</h1>
      <h2 class="subtitle center-text">Deploy Offline Web Apps to GitHub Pages</h2>

      <section class="buttons">
        <a href="https://github.com/mozilla/oghliner" class="button">Fork on GitHub</a>
        <a href="https://www.npmjs.com/package/oghliner" class="button">Discover on npm</a>
      </section>

      <section>
        
        <p><a href="https://travis-ci.org/mozilla/oghliner"><img src="https://travis-ci.org/mozilla/oghliner.svg?branch=master" alt="Build Status"></a>
<a href="https://david-dm.org/mozilla/oghliner"><img src="https://david-dm.org/mozilla/oghliner.svg" alt="dependencies"></a>
<a href="https://david-dm.org/mozilla/oghliner#info=devDependencies"><img src="https://david-dm.org/mozilla/oghliner/dev-status.svg" alt="devdependencies"></a></p>
<h1 id="oghliner">Oghliner</h1>
<p>Oghliner is a Node tool to deploy Offline Web Apps to GitHub Pages.</p>
<p>Offline Web Apps are web apps that cache their files (HTML, JavaScript, CSS, images, etc.) on the client, so they work even when your network doesn&#39;t. <a href="https://pages.github.com/">GitHub Pages</a> is a simple host for static files.</p>
<p>Oghliner offlines an app by generating a <a href="https://github.com/slightlyoff/ServiceWorker/blob/master/explainer.md">Service Worker</a> for it. It deploys the app by committing it to the <em>gh-pages</em> branch of the repository being deployed.</p>
<p>Oghliner includes commands for bootstrapping an app from scratch or integrating its functionality into your existing app. It can also configure <a href="https://travis-ci.org">Travis CI</a> to automatically deploy your app when you merge changes to its master branch.</p>
<p>Oghliner has both command-line and module interfaces and provides five commands: <em>bootstrap</em>, <em>integrate</em>, <em>offline</em>, <em>deploy</em>, and <em>configure</em>. All commands are available via both interfaces, but the CLI is more appropriate for the <em>bootstrap</em>, <em>integrate</em>, and <em>configure</em> commands, which you&#39;ll invoke at most once per app; while the module is more appropriate for the <em>offline</em> and <em>deploy</em> commands, which you&#39;ll call each time you change your app and rebuild it.</p>
<h2 id="getting-started">Getting Started</h2>
<p>To use the CLI, install Oghliner globally:</p>
<pre><code>npm install --global oghliner
</code></pre><p>To use the module, install Oghliner locally and save it to your <em>dependencies</em>:</p>
<pre><code>npm install --save oghliner
</code></pre><p>Then <em>require</em> it in your script(s):</p>
<pre><code class="lang-js">var oghliner = require(&#39;oghliner&#39;);
</code></pre>
<h2 id="bootstrap">Bootstrap</h2>
<p>The <em>bootstrap</em> command creates an initial set of directories and files for a new app. To use it, first <a href="https://github.com/new">create a repository on GitHub</a> and clone it to your local machine:</p>
<pre><code>git clone git@github.com:mykmelez/offline-app.git
</code></pre><p>Then change to its working directory and invoke <code>oghliner bootstrap</code>:</p>
<pre><code>cd offline-app/
oghliner bootstrap
</code></pre><p>Oghliner will bootstrap your app by copying files from its app template to the current directory:</p>
<pre><code>Bootstrapping current directory as Oghliner app…

Your app&#39;s configuration is:

Name: offline-app
Repository: git@github.com:mykmelez/offline-app.git
Description: A template app bootstrapped with oghliner.
License: Apache-2.0

Would you like to change its configuration (y/N)? n

Creating files…
✓ Creating README.md
✓ Creating app
✓ Creating .gitignore
✓ Creating gulpfile.js
✓ Creating package.json
✓ Creating app/favicon.ico
✓ Creating app/fonts
✓ Creating app/images
✓ Creating app/index.html
✓ Creating app/robots.txt
✓ Creating app/scripts
✓ Creating app/styles
✓ Creating app/images/apple-touch-icon-114x114.png
✓ Creating app/images/apple-touch-icon-120x120.png
✓ Creating app/images/apple-touch-icon-144x144.png
✓ Creating app/images/apple-touch-icon-152x152.png
✓ Creating app/images/apple-touch-icon-57x57.png
✓ Creating app/images/apple-touch-icon-60x60.png
✓ Creating app/images/apple-touch-icon-72x72.png
✓ Creating app/images/apple-touch-icon-76x76.png
✓ Creating app/images/favicon-128x128.png
✓ Creating app/images/favicon-16x16.png
✓ Creating app/images/favicon-196x196.png
✓ Creating app/images/favicon-32x32.png
✓ Creating app/images/favicon-96x96.png
✓ Creating app/images/mstile-144x144.png
✓ Creating app/images/mstile-150x150.png
✓ Creating app/images/mstile-310x150.png
✓ Creating app/images/mstile-310x310.png
✓ Creating app/images/mstile-70x70.png
✓ Creating app/scripts/main.js
✓ Creating app/scripts/offline-manager.js
✓ Creating app/styles/stylesheet.css

✓ Creating files… done!
✓ Installing npm dependencies… done!

Your app has been bootstrapped! Just commit the changes and push the commit
to the origin/master branch:

git add --all &amp;&amp; git commit -m&quot;initial version of Oghliner app&quot;
git push origin master

Then you can build, offline, and deploy the app using gulp commands.

ℹ For more information about building, offlining and deployment, see:
    https://mozilla.github.io/oghliner/
</code></pre><p>Then just commit the changes and push the commit to the origin/master branch:</p>
<pre><code>git add --all &amp;&amp; git commit -m&quot;initial version of Oghliner app&quot;
git push origin master
</code></pre><p>Note: To bootstrap an app into a different directory than the current one, specify its path when invoking <em>bootstrap</em>:</p>
<pre><code>oghliner bootstrap path/to/another/clone/
</code></pre><h2 id="integrate">Integrate</h2>
<p>The <em>integrate</em> command adds Oghliner functionality into an existing app. To use it, invoke <code>oghliner integrate</code>, passing it the path to the directory containing your app&#39;s scripts:</p>
<pre><code>oghliner integrate app/scripts/
</code></pre><p>Oghliner will copy the <em>offline-manager.js</em> script to that directory:</p>
<pre><code>Integrating Oghliner into the app in the current directory…

✓ Copying offline-manager.js to app/scripts/… done!

Oghliner has been integrated into the app!

The app needs to load the script offline-manager.js in order to register
the service worker that offlines the app. To load the script, add this line
to the app&#39;s HTML page(s)/template(s):

&lt;script src=&quot;app/scripts/offline-manager.js&quot;&gt;&lt;/script&gt;

And commit the changes and push the commit to the origin/master branch:

git commit -m&quot;integrate Oghliner&quot; --all
git push origin master

Then you can offline and deploy the app using the offline and deploy commands.

ℹ For more information about offlining and deployment, see:
    https://mozilla.github.io/oghliner/
</code></pre><p>Then add a &lt;script&gt; tag referencing that script to your app&#39;s HTML page(s)/template(s). Oghliner will suggest one, but it doesn&#39;t necessarily know your app&#39;s directory structure, so make sure it contains the correct path to the file!</p>
<h2 id="offline">Offline</h2>
<p>The <em>offline</em> command generates a service worker that caches your app&#39;s files on the client.</p>
<p>To use it via the command line, invoke <code>oghliner offline</code>, passing it a <em>rootDir</em> argument specifying the directory containing the files to offline:</p>
<pre><code>oghliner offline dist/
</code></pre><p>To use it via the module, call <code>oghliner.offline</code>, passing it an <em>options</em> object with a <em>rootDir</em> property specifying the directory containing the files to offline:</p>
<pre><code class="lang-js">var promise = oghliner.offline({
  rootDir: &#39;dist/&#39;,
});
</code></pre>
<p>The call returns a Promise that resolves once Oghliner finishes generating the service worker. If left unspecified, the default value of <em>rootDir</em> is <code>./</code>, i.e. the current directory.</p>
<p>Note: <em>rootDir</em> should be the <em>target</em> directory containing the output of your build process, not the <em>source</em> directory containing the original files. For example, if your source files are in <em>app/</em>, and your build process outputs into <em>dist/</em>, then you should specify the <em>dist/</em> directory.</p>
<h3 id="options">Options</h3>
<p>The <em>offline</em> command takes the following options:</p>
<ul>
<li><code>--file-globs glob,…</code> or <code>fileGlobs: [&#39;glob&#39;, …]</code> - a comma-separated list of globs identifying the files to offline (default: <code>**/*</code>). The globs are matched inside <em>rootDir</em>.</li>
<li><code>--import-scripts script,…</code> or <code>importScripts: [&#39;script&#39;, …]</code> - a comma-separated list of additional scripts to evaluate in the service worker (no default value). This is useful, for example, when you want to use the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Push_API">Push API</a>.</li>
</ul>
<h2 id="deploy">Deploy</h2>
<p>The <em>deploy</em> command deploys your app to GitHub Pages by committing its files to the <em>gh-pages</em> branch of the repository and pushing the commit to GitHub.</p>
<p>To use it via the command line, invoke <code>oghliner deploy</code>, passing it a <em>rootDir</em> argument specifying the directory containing the files to deploy:</p>
<pre><code>oghliner deploy dist/
</code></pre><p>To use it via the module, call <code>oghliner.deploy</code>, passing it an <em>options</em> object with a <em>rootDir</em> property specifying the directory containing the files to deploy:</p>
<pre><code class="lang-js">var promise = oghliner.deploy({
  rootDir: &#39;dist/&#39;,
});
</code></pre>
<p>The call returns a Promise that resolves once Oghliner finishes deploying the app. If left unspecified, the default value of <em>rootDir</em> is <code>./</code>, i.e. the current directory.</p>
<p>Note: <em>rootDir</em> should be the <em>target</em> directory containing the output of your build process, not the <em>source</em> directory containing the original files. For example, if your source files are in <em>app/</em>, and your build process outputs into <em>dist/</em>, then you should specify the <em>dist/</em> directory.</p>
<h3 id="options">Options</h3>
<p>The <em>deploy</em> command takes the following options via both the CLI and the module:</p>
<ul>
<li><code>-m, --message message</code> or <code>message: &#39;message&#39;</code> - the message for the commit to the <em>gh-pages</em> branch</li>
</ul>
<p>The <em>deploy</em> command takes the following options via the module only:</p>
<ul>
<li><code>cloneDir: &#39;dir&#39;</code> - the directory into which Oghliner will create a temporary clone of the repository while deploying the app (default is implementation detail). This is mostly useful internally, for implementation of the CLI.</li>
<li><code>fileGlobs: [&#39;glob&#39;, …]</code> - a comma-separated list of globs identifying the files to offline (default: <code>**/*</code>). The globs are matched inside <em>rootDir</em>.</li>
<li><code>remote: &#39;remote&#39;</code> - the Git remote to which to push the <em>gh-pages</em> branch (default: <code>origin</code>).</li>
</ul>
<h2 id="configure">Configure</h2>
<p>The <em>configure</em> command configures Travis to automatically deploy an app to GitHub Pages when you push to its <em>master</em> branch.</p>
<p>To use it, invoke <code>oghliner configure</code> within your local working directory:</p>
<pre><code>oghliner configure
</code></pre><p>Oghliner will create a GitHub token that authorizes Travis to push changes to your repository, then configure Travis to use the token to deploy changes.</p>
<pre><code>Configuring Travis to auto-deploy to GitHub Pages…

Your repository has a single remote, origin.
Ok, I&#39;ll configure Travis to auto-deploy the origin remote (mykmelez/offline-app).

To check the status of your repository in Travis and authorize Travis to push
to it, I&#39;ll create GitHub personal access tokens, for which I need your GitHub
username and password (and two-factor authentication code, if appropriate).

ℹ For more information about GitHub personal access tokens, see:
    https://github.com/settings/tokens

Username: mykmelez
Password:

× Checking credentials… error!

You&#39;re using two-factor authentication with GitHub.
Please enter the code provided by your authentication software.

Auth Code: 123456

✓ Checking credentials… done!
✓ Creating temporary GitHub token for getting Travis token… done!
✓ Getting Travis token… done!
✓ Deleting temporary GitHub token for getting Travis token… done!
✓ Creating permanent GitHub token for Travis to push to the repository… done!
✓ Checking the status of your repository in Travis… done!
✓ I didn&#39;t find your repository in Travis; syncing Travis with GitHub… done!
✓ Checking the status of your repository in Travis… done!
✓ Your repository isn&#39;t active in Travis yet; activating it… done!
✓ Encrypting permanent GitHub token… done!
✓ Writing configuration to .travis.yml file… done!

⚠ You didn&#39;t already have a .travis.yml file, so I created one for you.
  For more information about the file, see:
    http://docs.travis-ci.com/user/customizing-the-build/

You&#39;re ready to auto-deploy using Travis!  Just commit the changes
in .travis.yml and push the commit to the origin/master branch:

git add .travis.yml
git commit -m&quot;configure Travis to auto-deploy to GitHub Pages&quot; .travis.yml
git push origin master

Then visit https://travis-ci.org/mykmelez/offline-app/builds to see the build status.
</code></pre><p>After configuring the repository, add and commit the changes to <em>.travis.yml</em> and push the <em>master</em> branch to the <em>origin</em> remote on GitHub to make Travis build and auto-deploy your app:</p>
<pre><code>git add .travis.yml
git commit -m&quot;configure Travis to auto-deploy to GitHub Pages&quot; .travis.yml
git push origin master
</code></pre><p>You can see the status of a build/deployment at <code>https://travis-ci.org/USERNAME/REPOSITORY/builds</code>. For example, the status of builds for <a href="https://github.com/mykmelez/eggtimer/">https://github.com/mykmelez/eggtimer/</a> is at <a href="https://travis-ci.org/mykmelez/eggtimer/builds">https://travis-ci.org/mykmelez/eggtimer/builds</a>.</p>
<p>Once configured, Travis deploys successful builds via <code>gulp deploy</code>. You can change the deploy command by editing your .travis.yml file.</p>
<p>Note: Oghliner needs your GitHub credentials to create the token, and the token gives Travis limited access to your GitHub account. Specifically, the token provides the <em>public_repo</em> <a href="https://developer.github.com/v3/oauth/#scopes">scope</a>, which gives Travis &quot;read/write access to code, commit statuses, collaborators, and deployment statuses for public repositories and organizations.&quot; For more information about personal access tokens, see <a href="https://help.github.com/articles/creating-an-access-token-for-command-line-use/">Creating an access token for command-line use</a>.</p>
<h2 id="build-process-integration">Build Process Integration</h2>
<p>You can integrate Oghliner into your Node-based build process via its module interface. This is particularly helpful for the <em>offline</em> and <em>deploy</em> commands, which you&#39;ll call each time you change your app and rebuild it.</p>
<p>To do so, first install Oghliner locally and save it to your <em>dependencies</em>:</p>
<pre><code>npm install --save oghliner
</code></pre><p>Then require the module in your build script and call its <em>offline</em> function, passing <em>options</em> to configure its behavior. For example, if you use Gulp to build your app, you could add code like this to your gulpfile.js:</p>
<pre><code class="lang-js">var oghliner = require(&#39;oghliner&#39;);

gulp.task(&#39;offline&#39;, function() {
  return oghliner.offline({
    rootDir: &#39;dist/&#39;,
    fileGlobs: [
      &#39;**/*.html&#39;,
      &#39;js/**/*.js&#39;,
    ],
  });
});

gulp.task(&#39;deploy&#39;, function() {
  return oghliner.deploy({
    rootDir: &#39;dist/&#39;,
  });
});
</code></pre>
<p>Then you could invoke <code>gulp offline &amp;&amp; gulp deploy</code> to offline and deploy your app.</p>
<h2 id="gulp-integration">Gulp Integration</h2>
<p>If you used Oghliner to bootstrap your app, then it already has a gulpfile.js with tasks for building, offlining, and deploying your app.  To use it, install Gulp globally:</p>
<pre><code>npm install --global gulp
</code></pre><p>Then invoke <code>gulp build &amp;&amp; gulp offline &amp;&amp; gulp deploy</code> to build, offline, and deploy your app:</p>
<pre><code>gulp build &amp;&amp; gulp offline &amp;&amp; gulp deploy
</code></pre>

        <h2>Resources</h2>
        <div class="links-columns">
          <div class="column">
            <h3>About Service Workers</h3>
            <ul>
              <li><a href="http://www.html5rocks.com/en/tutorials/service-worker/introduction/">Introduction to Service Worker</a></li>
              <li><a href="https://github.com/slightlyoff/ServiceWorker/blob/master/explainer.md">ServiceWorkers Explained</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API">Service Worker API</a></li>
            </ul>
          </div>
          <div class="column">
            <h3>About GitHub Pages</h3>
            <ul>
              <li><a href="https://help.github.com/categories/github-pages-basics/">What are GitHub Pages</a></li>
              <li><a href="https://pages.github.com/">GitHub Pages</a></li>
              <li><a href="https://help.github.com/categories/github-pages-basics/">GitHub Pages Basics</a></li>
            </ul>
          </div>
          <div class="column">
            <h3>ServiceWorker API Status</h3>
            <ul>
              <li><a href="https://mozilla.github.io/platatus/#service-worker">Service Worker status</a></li>
              <li><a href="https://jakearchibald.github.io/isserviceworkerready/">Is ServiceWorker Ready?</a></li>
              <li><a href="http://caniuse.com/serviceworkers">Can I use Service Workers?</a></li>
            </ul>
          </div>
        </div>
      </section>
    </main>

    </div>

    <!-- FOOTER  -->
    <footer class="inner">
      <p>
        <span class="copyright">Oghliner is a <a href="https://github.com/mozilla">Mozilla</a> project.</span>
        &bull;
        <a href="https://github.com/mozilla/oghliner">Oghliner on GitHub</a>
      </p>
    </footer>

  </body>
</html>
